<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Database | Goyave</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="16x16" href="/goyave_16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/goyave_32.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/goyave_64.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/goyave_128.png">
    <link rel="icon" type="image/png" sizes="256x256" href="/goyave_256.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/goyave_512.png">
    <meta name="description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta name="og:title" content="Database - Goyave">
    <meta name="twitter:title" content="Database - Goyave">
    <meta name="title" content="Database - Goyave">
    <meta property="twitter:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="twitter:image:src" content="https://goyave.dev/goyave_banner.png">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Goyave is a Golang REST API framework aiming at cleanliness, fast development and power.">
    <meta property="og:image" content="https://goyave.dev/goyave_banner.png">
    <meta property="og:site_name" content="Goyave">
    
    <link rel="preload" href="/assets/css/0.styles.09fa03b4.css" as="style"><link rel="preload" href="/assets/js/app.0fab613d.js" as="script"><link rel="preload" href="/assets/js/7.5f28aa4a.js" as="script"><link rel="preload" href="/assets/js/1.95e4addf.js" as="script"><link rel="preload" href="/assets/js/22.ccda9320.js" as="script"><link rel="preload" href="/assets/js/3.89ff22e3.js" as="script"><link rel="prefetch" href="/assets/js/10.8cabf2e5.js"><link rel="prefetch" href="/assets/js/11.301c5e6d.js"><link rel="prefetch" href="/assets/js/12.5030db06.js"><link rel="prefetch" href="/assets/js/13.e07214a7.js"><link rel="prefetch" href="/assets/js/14.5e5de288.js"><link rel="prefetch" href="/assets/js/15.8937d4d1.js"><link rel="prefetch" href="/assets/js/16.eea9f498.js"><link rel="prefetch" href="/assets/js/17.6a49f79f.js"><link rel="prefetch" href="/assets/js/18.9064b53f.js"><link rel="prefetch" href="/assets/js/19.aad51624.js"><link rel="prefetch" href="/assets/js/20.8221bcb6.js"><link rel="prefetch" href="/assets/js/21.da4e8558.js"><link rel="prefetch" href="/assets/js/23.0ca31ee7.js"><link rel="prefetch" href="/assets/js/24.af509494.js"><link rel="prefetch" href="/assets/js/25.fcf16e68.js"><link rel="prefetch" href="/assets/js/26.1a951ead.js"><link rel="prefetch" href="/assets/js/27.e291ece5.js"><link rel="prefetch" href="/assets/js/28.750fe763.js"><link rel="prefetch" href="/assets/js/29.d315acbe.js"><link rel="prefetch" href="/assets/js/30.7068c4ed.js"><link rel="prefetch" href="/assets/js/31.a18c61c0.js"><link rel="prefetch" href="/assets/js/32.2477c512.js"><link rel="prefetch" href="/assets/js/33.22185d2b.js"><link rel="prefetch" href="/assets/js/4.ab369c1d.js"><link rel="prefetch" href="/assets/js/5.e192e349.js"><link rel="prefetch" href="/assets/js/6.ed0c8c15.js"><link rel="prefetch" href="/assets/js/8.fb45739b.js"><link rel="prefetch" href="/assets/js/9.607522ae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.09fa03b4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/goyave_64.png" alt="Goyave" class="logo"> <span class="site-name can-hide">Goyave</span></a> <div class="links"><div class="user-settings"><a title="Dark theme" href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M8 0c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zM8 15c-3.9 0-7-3.1-7-7 0-2.4 1.2-4.6 3.2-5.9-0.1 0.6-0.2 1.3-0.2 1.9 0 4.9 4 8.9 8.9 9-1.3 1.3-3 2-4.9 2z"></path></svg></a></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://pkg.go.dev/goyave.dev/goyave/v3" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pkg.go.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/go-goyave/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="sponsors" data-v-094edf48><!----> <a href="https://github.com/sponsors/System-Glitch/" rel="nofollow" target="_blank" class="become-backer" data-v-094edf48>
    Become a Sponsor
  </a></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Basics</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/basics/routing.html" class="sidebar-link">Routing</a></li><li><a href="/guide/basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/guide/basics/requests.html" class="sidebar-link">Requests</a></li><li><a href="/guide/basics/controllers.html" class="sidebar-link">Controllers</a></li><li><a href="/guide/basics/responses.html" class="sidebar-link">Responses</a></li><li><a href="/guide/basics/database.html" aria-current="page" class="active sidebar-link">Database</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/basics/database.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/guide/basics/database.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/guide/basics/database.html#getting-a-database-connection" class="sidebar-link">Getting a database connection</a></li><li class="sidebar-sub-header"><a href="/guide/basics/database.html#models" class="sidebar-link">Models</a></li><li class="sidebar-sub-header"><a href="/guide/basics/database.html#pagination" class="sidebar-link">Pagination</a></li><li class="sidebar-sub-header"><a href="/guide/basics/database.html#setting-up-ssl-tls" class="sidebar-link">Setting up SSL/TLS</a></li></ul></li><li><a href="/guide/basics/validation.html" class="sidebar-link">Validation</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="database"><a href="#database" class="header-anchor">#</a> Database</h1> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#configuration">Configuration</a><ul><li><a href="#options">Options</a></li><li><a href="#drivers">Drivers</a></li></ul></li><li><a href="#getting-a-database-connection">Getting a database connection</a><ul><li><a href="#connection-initializers">Connection initializers</a></li></ul></li><li><a href="#models">Models</a><ul><li><a href="#defining-a-model">Defining a model</a></li><li><a href="#hidden-fields">Hidden fields</a></li><li><a href="#automatic-migrations">Automatic migrations</a></li></ul></li><li><a href="#pagination">Pagination</a></li><li><a href="#setting-up-ssl-tls">Setting up SSL/TLS</a><ul><li><a href="#mysql">MySQL</a></li><li><a href="#postgresql">PostgreSQL</a></li><li><a href="#mssql">MSSQL</a></li></ul></li></ul></div><p></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Most web applications use a database. In this section, we are going to see how Goyave applications can query a database, using the awesome <a href="https://gorm.io/" target="_blank" rel="noopener noreferrer">Gorm ORM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Database connections are managed by the framework and are long-lived. When the server shuts down, the database connections are closed automatically. So you don't have to worry about creating, closing or refreshing database connections in your application.</p> <p>All functions below require the <code>database</code> and the <code>gorm</code> packages to be imported.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;goyave.dev/goyave/v3/database&quot;</span>
  <span class="token string">&quot;gorm.io/gorm&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <p>Very few code is required to get started with databases. There are some <a href="/guide/configuration.html#database-category">configuration</a> options that you need to change though:</p> <ul><li><code>database.connection</code></li> <li><code>database.host</code></li> <li><code>database.port</code></li> <li><code>database.name</code></li> <li><code>database.username</code></li> <li><code>database.password</code></li> <li><code>database.options</code></li> <li><code>database.maxOpenConnection</code></li> <li><code>database.maxIdleConnection</code></li> <li><code>database.maxLifetime</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>database.options</code> represents the additional connection options. For example, when using MySQL, you should use the <code>parseTime=true</code> option so <code>time.Time</code> can be handled correctly. Available options differ from one driver to another and can be found in their respective documentation.</p></div> <h3 id="options"><a href="#options" class="header-anchor">#</a> Options</h3> <p>This section gives an example of the value for the <code>database.options</code> configuration entry for each supported driver.</p> <h4 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token string">&quot;charset=utf8mb4&amp;collation=utf8mb4_general_ci&amp;parseTime=true&amp;loc=Local&quot;</span>
</code></pre></div><p>Find more information about the MySQL options <a href="https://github.com/go-sql-driver/mysql#parameters" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sslmode=disable application_name=goyave&quot;</span>
</code></pre></div><p>Find more information about the PostgreSQL options <a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="sqlite"><a href="#sqlite" class="header-anchor">#</a> SQLite</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cache=shared&amp;mode=memory&quot;</span>
</code></pre></div><p>Find more information about the SQLite options <a href="https://github.com/mattn/go-sqlite3#connection-string" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="mssql"><a href="#mssql" class="header-anchor">#</a> MSSQL</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token string">&quot;encrypt=disable&quot;</span>
</code></pre></div><p>Find more information about the MSSQL options <a href="https://github.com/denisenkom/go-mssqldb#connection-parameters-and-dsn" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="drivers"><a href="#drivers" class="header-anchor">#</a> Drivers</h3> <p>The framework supports the following sql drivers out-of-the-box:</p> <ul><li><code>none</code> (<em>Disable database features</em>)</li> <li><code>mysql</code></li> <li><code>postgres</code></li> <li><code>sqlite3</code></li> <li><code>mssql</code></li></ul> <p>Change the <code>database.connection</code> config entry to the desired driver.</p> <p>In order to be able connect to the database, Gorm needs a database driver to be imported. Add the following import to your <code>main.go</code>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token boolean">_</span> <span class="token string">&quot;goyave.dev/goyave/v3/database/dialect/mysql&quot;</span>
<span class="token comment">// import _ &quot;goyave.dev/goyave/v3/database/dialect/postgres&quot;</span>
<span class="token comment">// import _ &quot;goyave.dev/goyave/v3/database/dialect/sqlite&quot;</span>
<span class="token comment">// import _ &quot;goyave.dev/goyave/v3/database/dialect/mssql&quot;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For SQLite, only the <code>database.name</code> config entry is required.</p></div> <hr> <p>You can <strong>register more dialects</strong> for GORM. Start by implementing or importing it, then tell Goyave how to build the connection string for this dialect:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">&quot;goyave.dev/goyave/v3/database&quot;</span>
  <span class="token string">&quot;example.com/user/mydriver&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  database<span class="token punctuation">.</span><span class="token function">RegisterDialect</span><span class="token punctuation">(</span><span class="token string">&quot;my-driver&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;{username}:{password}@({host}:{port})/{name}?{options}&quot;</span><span class="token punctuation">,</span> mydriver<span class="token punctuation">.</span>Open<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>See the <a href="https://gorm.io/docs/write_driver.html" target="_blank" rel="noopener noreferrer">GORM &quot;Write driver&quot; documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <p>Template format accepts the following placeholders, which will be replaced with the corresponding configuration entries automatically:</p> <ul><li><code>{username}</code></li> <li><code>{password}</code></li> <li><code>{host}</code></li> <li><code>{port}</code></li> <li><code>{name}</code></li> <li><code>{options}</code></li></ul> <p>You cannot override a dialect that already exists.</p> <h4 id="database-registerdialect"><a href="#database-registerdialect" class="header-anchor">#</a> database.RegisterDialect</h4> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>name string</code></td> <td><code>void</code></td></tr> <tr><td><code>template string</code></td> <td></td></tr> <tr><td><code>initializer DialectorInitializer</code></td> <td></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>DialectorInitializer</code> is an alias for <code>func(dsn string) gorm.Dialector</code></p></div> <h2 id="getting-a-database-connection"><a href="#getting-a-database-connection" class="header-anchor">#</a> Getting a database connection</h2> <h4 id="database-getconnection"><a href="#database-getconnection" class="header-anchor">#</a> database.GetConnection</h4> <p>Returns the global database connection pool. Creates a new connection pool if no connection is available.</p> <p>By default, the <a href="https://gorm.io/docs/performance.html#Caches-Prepared-Statement" target="_blank" rel="noopener noreferrer"><code>PrepareStmt</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> option is <strong>enabled</strong>.</p> <p>The connections will be closed automatically on server shutdown so you don't need to call <code>Close()</code> when you're done with the database.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>*gorm.DB</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">GetConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span>
</code></pre></div><h4 id="database-conn"><a href="#database-conn" class="header-anchor">#</a> database.Conn</h4> <p><code>Conn()</code> is a short alias for <code>GetConnection()</code>.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>*gorm.DB</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>user<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Learn how to use the CRUD interface and the query builder in the <a href="https://gorm.io/docs/index.html" target="_blank" rel="noopener noreferrer">Gorm documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h4 id="database-close"><a href="#database-close" class="header-anchor">#</a> database.Close</h4> <p>If you want to manually close the database connection, you can do it using <code>Close()</code>. New connections can be re-opened using <code>GetConnection()</code> as usual. This function does nothing if the database connection is already closed or has never been created.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>error</code></td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>database<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="connection-initializers"><a href="#connection-initializers" class="header-anchor">#</a> Connection initializers</h3> <p>You can modify the global instance of <code>*gorm.DB</code> when it's created (and re-created, after a <code>Close()</code> for example) using <code>Initializer</code> functions. This is useful if you want to set global settings such as <code>gorm:table_options</code> and make them effective for your whole application. It is recommended to register initializers <strong>before</strong> starting the application.</p> <p>Initializer functions are called in order, meaning that functions added last can override settings defined by previous ones.</p> <div class="language-go extra-class"><pre class="language-go"><code>database<span class="token punctuation">.</span><span class="token function">AddInitializer</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>db <span class="token operator">*</span>gorm<span class="token punctuation">.</span>DB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    db<span class="token punctuation">.</span>Config<span class="token punctuation">.</span>SkipDefaultTransaction <span class="token operator">=</span> <span class="token boolean">true</span>
    db<span class="token punctuation">.</span>Statement<span class="token punctuation">.</span>Settings<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">&quot;gorm:table_options&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ENGINE=InnoDB&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="database-addinitializer"><a href="#database-addinitializer" class="header-anchor">#</a> database.AddInitializer</h4> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>initializer database.Initializer</code></td> <td><code>void</code></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>database.Initializer</code> is an alias for <code>func(*gorm.DB)</code></li> <li>Useful link related to initializers: <a href="https://gorm.io/docs/gorm_config.html" target="_blank" rel="noopener noreferrer">GORM config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <h4 id="database-clearinitializers"><a href="#database-clearinitializers" class="header-anchor">#</a> database.ClearInitializers</h4> <p>Remove all database connection initializer functions.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <h2 id="models"><a href="#models" class="header-anchor">#</a> Models</h2> <p>A model is a structure reflecting a database table structure. An instance of a model is a single database record. Each model is defined in its own file inside the <code>database/model</code> directory.</p> <h3 id="defining-a-model"><a href="#defining-a-model" class="header-anchor">#</a> Defining a model</h3> <p>Models are usually just normal Golang structs, basic Go types, or pointers of them. <code>sql.Scanner</code> and <code>driver.Valuer</code> interfaces are also supported.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    database<span class="token punctuation">.</span><span class="token function">RegisterModel</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    gorm<span class="token punctuation">.</span>Model
    Name         <span class="token builtin">string</span>
    Age          sql<span class="token punctuation">.</span>NullInt64
    Birthday     <span class="token operator">*</span>time<span class="token punctuation">.</span>Time
    Email        <span class="token builtin">string</span>  <span class="token string">`gorm:&quot;type:varchar(100);uniqueIndex&quot;`</span>
    Role         <span class="token builtin">string</span>  <span class="token string">`gorm:&quot;size:255&quot;`</span> <span class="token comment">// set field size to 255</span>
    MemberNumber <span class="token operator">*</span><span class="token builtin">string</span> <span class="token string">`gorm:&quot;unique;not null&quot;`</span> <span class="token comment">// set member number to unique and not null</span>
    Num          <span class="token builtin">int</span>     <span class="token string">`gorm:&quot;autoIncrement&quot;`</span> <span class="token comment">// set num to auto incrementable</span>
    Address      <span class="token builtin">string</span>  <span class="token string">`gorm:&quot;index:addr&quot;`</span> <span class="token comment">// create index with name `addr` for address</span>
    IgnoreMe     <span class="token builtin">int</span>     <span class="token string">`gorm:&quot;-&quot;`</span> <span class="token comment">// ignore this field</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>All models should be <strong>registered</strong> in an <code>init()</code> function inside their model file. To ensure the <code>init()</code> functions are executed before the server starts, import the <code>models</code> package in your <code>main.go</code>.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token boolean">_</span> <span class="token string">&quot;database/model&quot;</span>
</code></pre></div></div> <p>Learn more about model declaration in the <a href="https://gorm.io/docs/models.html" target="_blank" rel="noopener noreferrer">Gorm documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="database-registermodel"><a href="#database-registermodel" class="header-anchor">#</a> database.RegisterModel</h4> <p>Registers a model for auto-migration.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>model interface{}</code></td> <td><code>void</code></td></tr></tbody></table> <h4 id="database-getregisteredmodels"><a href="#database-getregisteredmodels" class="header-anchor">#</a> database.GetRegisteredModels</h4> <p>Get the registered models. The returned slice is a copy of the original, so it cannot be modified.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>[]interface{}</code></td></tr></tbody></table> <h4 id="database-clearregisteredmodels"><a href="#database-clearregisteredmodels" class="header-anchor">#</a> database.ClearRegisteredModels</h4> <p>Unregister all models.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>void</code></td></tr></tbody></table> <h3 id="hidden-fields"><a href="#hidden-fields" class="header-anchor">#</a> Hidden fields</h3> <p><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Since v2.9.0</span></p> <p>Sometimes you may wish to exclude some fields from your model's JSON form, such as passwords. To do so, you can add the <code>json:&quot;-&quot;</code> tag to the field you want to hide.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Username <span class="token builtin">string</span>
    Password <span class="token builtin">string</span> <span class="token string">`json:&quot;-&quot;`</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The problem with <code>json:&quot;-&quot;</code> is that you won't be able to see those fields if you decide to serialize your records in json for another use, such as statistics. In that case, you can add the <code>model:&quot;hide&quot;</code> tag to the field you want to hide, and use <a href="/guide/advanced/helpers.html#helper-removehiddenfields"><code>helper.RemoveHiddenFields()</code></a> to filter out those fields.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Username <span class="token builtin">string</span>
    Password <span class="token builtin">string</span> <span class="token string">`model:&quot;hide&quot; json:&quot;,omitempty&quot;`</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="automatic-migrations"><a href="#automatic-migrations" class="header-anchor">#</a> Automatic migrations</h3> <p>If the <code>database.autoMigrate</code> config option is set to true, all registered models will be automatically migrated when the server starts.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Automatic migrations create tables, missing foreign keys, constraints, columns and indexes, and will change existing column’s type if it’s size, precision or nullable changed. They <strong>wont't</strong> delete unused columns.</p></div> <p>If you would like to know more about migrations using Gorm, read their <a href="https://gorm.io/docs/migration.html" target="_blank" rel="noopener noreferrer">documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="pagination"><a href="#pagination" class="header-anchor">#</a> Pagination</h2> <p><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Since v3.4.0</span></p> <p><code>database.Paginator</code> is a tool that helps you paginate records. This structure contains pagination information (current page, maximum page, total number of records), which is automatically fetched. You can send the paginator directly to the client as a response.</p> <p><strong>Example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code>articles <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>model<span class="token punctuation">.</span>Article<span class="token punctuation">{</span><span class="token punctuation">}</span>
db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
paginator <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">NewPaginator</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> <span class="token operator">&amp;</span>articles<span class="token punctuation">)</span>
result <span class="token operator">:=</span> paginator<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> paginator<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When calling <code>paginator.Find()</code>, the <code>paginator</code> struct will be automatically updated with the total and max pages. The destination slice passed to <code>NewPaginator()</code> is also updated automatically. (<code>articles</code> in the above example)</p> <hr> <p>You can add clauses to your SQL query before creating the paginator. This is especially useful if you want to paginate search results. The condition will be applied to both the total records count query and the actual page query.</p> <p><strong>Full example:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Index</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    articles <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>model<span class="token punctuation">.</span>Article<span class="token punctuation">{</span><span class="token punctuation">}</span>
    page <span class="token operator">:=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span><span class="token function">Has</span><span class="token punctuation">(</span><span class="token string">&quot;page&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        page <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">Integer</span><span class="token punctuation">(</span><span class="token string">&quot;page&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    pageSize <span class="token operator">:=</span> DefaultPageSize
    <span class="token keyword">if</span> request<span class="token punctuation">.</span><span class="token function">Has</span><span class="token punctuation">(</span><span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pageSize <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">Integer</span><span class="token punctuation">(</span><span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    tx <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">Conn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> request<span class="token punctuation">.</span><span class="token function">Has</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        search <span class="token operator">:=</span> helper<span class="token punctuation">.</span><span class="token function">EscapeLike</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        tx <span class="token operator">=</span> tx<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;title LIKE ?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%&quot;</span><span class="token operator">+</span>search<span class="token operator">+</span><span class="token string">&quot;%&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    paginator <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">NewPaginator</span><span class="token punctuation">(</span>tx<span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> <span class="token operator">&amp;</span>articles<span class="token punctuation">)</span>
    result <span class="token operator">:=</span> paginator<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> response<span class="token punctuation">.</span><span class="token function">HandleDatabaseError</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> paginator<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="database-newpaginator"><a href="#database-newpaginator" class="header-anchor">#</a> database.NewPaginator</h4> <p>Create a new <code>Paginator</code>.</p> <p>Given DB transaction can contain clauses already, such as WHERE, if you want to filter results.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td><code>db *gorm.DB</code></td> <td><code>*Paginator</code></td></tr> <tr><td><code>page int</code></td> <td></td></tr> <tr><td><code>pageSize int</code></td> <td></td></tr> <tr><td><code>dest interface{}</code></td> <td></td></tr></tbody></table> <p><strong><code>Paginator</code> definition:</strong></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Paginator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	  MaxPage     <span class="token builtin">int64</span>
	  Total       <span class="token builtin">int64</span>
	  PageSize    <span class="token builtin">int</span>
	  CurrentPage <span class="token builtin">int</span>
	  Records     <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="paginator-find"><a href="#paginator-find" class="header-anchor">#</a> paginator.Find</h4> <p>Find requests page information (total records and max page) and executes the transaction. The Paginate struct is updated automatically, as well as the destination slice given in <code>NewPaginate()</code>.</p> <table><thead><tr><th>Parameters</th> <th>Return</th></tr></thead> <tbody><tr><td></td> <td><code>*gorm.DB</code></td></tr></tbody></table> <h2 id="setting-up-ssl-tls"><a href="#setting-up-ssl-tls" class="header-anchor">#</a> Setting up SSL/TLS</h2> <h3 id="mysql-2"><a href="#mysql-2" class="header-anchor">#</a> MySQL</h3> <p>If you want to make your database connection use a TLS configuration, create <code>database/tls.go</code>. In this file, create an <code>init()</code> function which will load your certificates and keys.</p> <p>Don't forget to blank import the database package in your <code>main.go</code>: <code>import _ &quot;myproject/database&quot;</code>. Finally, for a configuration named &quot;custom&quot;, add <code>&amp;tls=custom</code> at the end of the <code>database.options</code> configuration entry.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> database

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;crypto/tls&quot;</span>
    <span class="token string">&quot;crypto/x509&quot;</span>
    <span class="token string">&quot;io/ioutil&quot;</span>

    <span class="token string">&quot;goyave.dev/goyave/v3&quot;</span>
    <span class="token string">&quot;github.com/go-sql-driver/mysql&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rootCertPool <span class="token operator">:=</span> x509<span class="token punctuation">.</span><span class="token function">NewCertPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    pem<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;/path/ca-cert.pem&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        goyave<span class="token punctuation">.</span>ErrLogger<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> ok <span class="token operator">:=</span> rootCertPool<span class="token punctuation">.</span><span class="token function">AppendCertsFromPEM</span><span class="token punctuation">(</span>pem<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
        goyave<span class="token punctuation">.</span>ErrLogger<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to append PEM.&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    clientCert <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>tls<span class="token punctuation">.</span>Certificate<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    certs<span class="token punctuation">,</span> err <span class="token operator">:=</span> tls<span class="token punctuation">.</span><span class="token function">LoadX509KeyPair</span><span class="token punctuation">(</span><span class="token string">&quot;/path/client-cert.pem&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/path/client-key.pem&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        goyave<span class="token punctuation">.</span>ErrLogger<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    clientCert <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>clientCert<span class="token punctuation">,</span> certs<span class="token punctuation">)</span>
    mysql<span class="token punctuation">.</span><span class="token function">RegisterTLSConfig</span><span class="token punctuation">(</span><span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>tls<span class="token punctuation">.</span>Config<span class="token punctuation">{</span>
        RootCAs<span class="token punctuation">:</span>      rootCertPool<span class="token punctuation">,</span>
        Certificates<span class="token punctuation">:</span> clientCert<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://pkg.go.dev/github.com/go-sql-driver/mysql#RegisterTLSConfig" target="_blank" rel="noopener noreferrer">Reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="postgresql-2"><a href="#postgresql-2" class="header-anchor">#</a> PostgreSQL</h3> <p>For PostgreSQL, you only need to add a few options to the <code>database.options</code> configuration entry.</p> <div class="language- extra-class"><pre class="language-text"><code>sslmode=verify-full sslrootcert=root.crt sslkey=client.key sslcert=client.crt
</code></pre></div><p>Replace <code>root.crt</code>, <code>client.key</code> and <code>client.crt</code> with the paths to the corresponding files.</p> <p><a href="https://pkg.go.dev/github.com/lib/pq#hdr-Connection_String_Parameters" target="_blank" rel="noopener noreferrer">Reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="mssql-2"><a href="#mssql-2" class="header-anchor">#</a> MSSQL</h3> <p>Refer to the <a href="https://github.com/denisenkom/go-mssqldb#less-common-parameters" target="_blank" rel="noopener noreferrer">driver's documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/go-goyave/goyave.dev/edit/master/src/guide/basics/database.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/basics/responses.html" class="prev">
        Responses
      </a></span> <span class="next"><a href="/guide/basics/validation.html">
        Validation
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0fab613d.js" defer></script><script src="/assets/js/7.5f28aa4a.js" defer></script><script src="/assets/js/1.95e4addf.js" defer></script><script src="/assets/js/22.ccda9320.js" defer></script><script src="/assets/js/3.89ff22e3.js" defer></script>
  </body>
</html>
