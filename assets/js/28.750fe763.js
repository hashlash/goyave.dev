(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{402:function(e,t,a){"use strict";a.r(t);var o=a(26),i=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"changelog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#changelog"}},[e._v("#")]),e._v(" Changelog")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#v3-7-x"}},[e._v("v3.7.x")]),a("ul",[a("li",[a("a",{attrs:{href:"#v3-7-1"}},[e._v("v3.7.1")])]),a("li",[a("a",{attrs:{href:"#v3-7-0"}},[e._v("v3.7.0")])])])]),a("li",[a("a",{attrs:{href:"#v3-6-0"}},[e._v("v3.6.0")])]),a("li",[a("a",{attrs:{href:"#v3-5-0"}},[e._v("v3.5.0")])]),a("li",[a("a",{attrs:{href:"#v3-4-0"}},[e._v("v3.4.0")])]),a("li",[a("a",{attrs:{href:"#v3-3-x"}},[e._v("v3.3.x")]),a("ul",[a("li",[a("a",{attrs:{href:"#v3-3-1"}},[e._v("v3.3.1")])]),a("li",[a("a",{attrs:{href:"#v3-3-0"}},[e._v("v3.3.0")])])])]),a("li",[a("a",{attrs:{href:"#v3-2-0"}},[e._v("v3.2.0")])]),a("li",[a("a",{attrs:{href:"#v3-1-0"}},[e._v("v3.1.0")])]),a("li",[a("a",{attrs:{href:"#v3-0-x"}},[e._v("v3.0.x")]),a("ul",[a("li",[a("a",{attrs:{href:"#v3-0-1"}},[e._v("v3.0.1")])]),a("li",[a("a",{attrs:{href:"#v3-0-0"}},[e._v("v3.0.0")])])])]),a("li",[a("a",{attrs:{href:"#v2-x-x"}},[e._v("v2.x.x")]),a("ul",[a("li",[a("a",{attrs:{href:"#v2-10-x"}},[e._v("v2.10.x")])]),a("li",[a("a",{attrs:{href:"#v2-9-0"}},[e._v("v2.9.0")])]),a("li",[a("a",{attrs:{href:"#v2-8-0"}},[e._v("v2.8.0")])]),a("li",[a("a",{attrs:{href:"#v2-7-x"}},[e._v("v2.7.x")])]),a("li",[a("a",{attrs:{href:"#v2-6-0"}},[e._v("v2.6.0")])]),a("li",[a("a",{attrs:{href:"#v2-5-0"}},[e._v("v2.5.0")])]),a("li",[a("a",{attrs:{href:"#v2-4-x"}},[e._v("v2.4.x")])]),a("li",[a("a",{attrs:{href:"#v2-3-0"}},[e._v("v2.3.0")])]),a("li",[a("a",{attrs:{href:"#v2-2-x"}},[e._v("v2.2.x")])]),a("li",[a("a",{attrs:{href:"#v2-1-0"}},[e._v("v2.1.0")])]),a("li",[a("a",{attrs:{href:"#v2-0-0"}},[e._v("v2.0.0")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"v3-7-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-7-x"}},[e._v("#")]),e._v(" v3.7.x")]),e._v(" "),a("h3",{attrs:{id:"v3-7-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-7-1"}},[e._v("#")]),e._v(" v3.7.1")]),e._v(" "),a("ul",[a("li",[e._v("Don't parse body if "),a("code",[e._v("Content-Type")]),e._v(" is not set. Query params are still parsed. This change should drastically improve performance on requests with no body.")]),e._v(" "),a("li",[e._v("Set "),a("code",[e._v("request.Data")]),e._v(" to "),a("code",[e._v("nil")]),e._v(" (meaning parse failed) if query params couldn't be parsed.")])]),e._v(" "),a("h3",{attrs:{id:"v3-7-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-7-0"}},[e._v("#")]),e._v(" v3.7.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("code",[e._v("Optional")]),e._v(" flag to "),a("code",[e._v("BasicAuthenticator")]),e._v(" and "),a("code",[e._v("JWTAuthenticator")]),e._v(".")]),e._v(" "),a("li",[e._v("Added support for "),a("code",[e._v("database.options")]),e._v(" for the SQLite driver.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/responses.html#hijack"}},[a("code",[e._v("response.Hijack()")])]),e._v(". Therefore, "),a("code",[e._v("*goyave.Response")]),e._v(" now implements "),a("code",[e._v("http.Hijacker")]),e._v(". Note that status handlers and middleware (requests finalization step in their lifecycle) will still work for hijacked connections.")],1),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/websocket.html"}},[e._v("websocket")]),e._v(" support.")],1),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/multi-services.html#shutdown-hooks"}},[e._v("shutdown hooks")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("goyave.BaseURL()")]),e._v(".")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/configuration.html#config-loadjson"}},[a("code",[e._v("config.LoadJSON()")])]),e._v(". This can be used to load configuration from an embedded configuration file using Go's 1.16 embed directive.")],1),e._v(" "),a("li",[e._v('Static file serving will no longer print "no such file or directory" to the error logger.')]),e._v(" "),a("li",[e._v("Static file serving optimization: check file existence once instead of twice.")])]),e._v(" "),a("h2",{attrs:{id:"v3-6-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-6-0"}},[e._v("#")]),e._v(" v3.6.0")]),e._v(" "),a("ul",[a("li",[e._v("Set content type to "),a("code",[e._v("application/json; charset=utf-8")]),e._v(" instead of "),a("code",[e._v("application/json")]),e._v(" when using "),a("code",[e._v("response.JSON()")]),e._v(".")]),e._v(" "),a("li",[e._v("Added default behavior for "),a("code",[e._v("HEAD")]),e._v(" method: all "),a("code",[e._v("GET")]),e._v(" routes can now match the HTTP "),a("code",[e._v("HEAD")]),e._v(" method. This fixes "),a("code",[e._v("405 Method Not Allowed")]),e._v(" when requesting an URL with the "),a("code",[e._v("HEAD")]),e._v(" method when no route explicitly matches the "),a("code",[e._v("HEAD")]),e._v(" method. See the "),a("RouterLink",{attrs:{to:"/guide/basics/routing.html#handling-head"}},[e._v("HEAD routing advice")]),e._v(" for more details.")],1),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/requests.html#request-tostruct"}},[a("code",[e._v("request.ToStruct()")])]),e._v(", which puts the request's data into the given structure.")],1)]),e._v(" "),a("h2",{attrs:{id:"v3-5-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-5-0"}},[e._v("#")]),e._v(" v3.5.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/rate-limiting.html"}},[e._v("rate limiter middleware")])],1)]),e._v(" "),a("h2",{attrs:{id:"v3-4-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-4-0"}},[e._v("#")]),e._v(" v3.4.0")]),e._v(" "),a("ul",[a("li",[e._v('Type-dependent rules validating integers (via the "integer" type rule) now share their validation message with the "numeric" type.')]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/database.html#pagination"}},[e._v("paginators")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/helpers.html#helper-escapelike"}},[a("code",[e._v("helper.EscapeLike()")])]),e._v(".")],1),e._v(" "),a("li",[e._v("Performance improvement by caching critical config entries ("),a("code",[e._v("protocol")]),e._v(", "),a("code",[e._v("maxUploadSize")]),e._v(" and "),a("code",[e._v("defaultLanguage")]),e._v("). This change leads to about 18% more requests per second. However, these entries cannot be dynamically changed anymore: a server restart will be needed.")])]),e._v(" "),a("h2",{attrs:{id:"v3-3-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-3-x"}},[e._v("#")]),e._v(" v3.3.x")]),e._v(" "),a("h3",{attrs:{id:"v3-3-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-3-1"}},[e._v("#")]),e._v(" v3.3.1")]),e._v(" "),a("ul",[a("li",[e._v("Fixed a bug in the validatior: the original value of type-converted fields was always used, leading to wrong validation of subsequent type-dependent rules.")])]),e._v(" "),a("h3",{attrs:{id:"v3-3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-3-0"}},[e._v("#")]),e._v(" v3.3.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("code",[e._v("request.Extra")]),e._v(". Thank you "),a("a",{attrs:{href:"https://github.com/gmgalvan",target:"_blank",rel:"noopener noreferrer"}},[e._v("Guillermo Galvan"),a("OutboundLink")],1),e._v(" for your contribution!")]),e._v(" "),a("li",[a("code",[e._v("TestSuite")]),e._v(" now runs auto migrations if they're enabled before running the tests.")]),e._v(" "),a("li",[a("code",[e._v("TestSuite")]),e._v(" don't load config anymore if it's already loaded. This allows you to load a test configuration file using "),a("code",[e._v("LoadFrom()")]),e._v(" before calling "),a("code",[e._v("goyave.RunTest()")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("response.JSON()")]),e._v(" doesn't remove hidden fields anymore. The use of "),a("code",[e._v('json:"-"')]),e._v(" makes more sense and saves some execution time. Removing hidden fields manually is still possible. See the "),a("RouterLink",{attrs:{to:"/guide/basics/database.html#hidden-fields"}},[e._v("hidden fields documentation")]),e._v(" for more details.")],1)]),e._v(" "),a("h2",{attrs:{id:"v3-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-2-0"}},[e._v("#")]),e._v(" v3.2.0")]),e._v(" "),a("ul",[a("li",[e._v("Added a way to customize the request's body field used by "),a("code",[e._v("JWTController")]),e._v(' for the authentication process. (By default, "username" and "password" are used)')]),e._v(" "),a("li",[e._v("Added a new validation rule: "),a("code",[e._v("unique")]),e._v(".")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("helper.Only()")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("filesystem.File.Save()")]),e._v(" now creates directories if needed.")])]),e._v(" "),a("h2",{attrs:{id:"v3-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-1-0"}},[e._v("#")]),e._v(" v3.1.0")]),e._v(" "),a("ul",[a("li",[e._v("Added support for validating objects ("),a("code",[e._v("map[string]interface{}")]),e._v(").")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("request.Object()")]),e._v(" accessor.")])]),e._v(" "),a("h2",{attrs:{id:"v3-0-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-0-x"}},[e._v("#")]),e._v(" v3.0.x")]),e._v(" "),a("h3",{attrs:{id:"v3-0-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-0-1"}},[e._v("#")]),e._v(" v3.0.1")]),e._v(" "),a("ul",[a("li",[e._v("Fixed a bug that prevented root-level routes with an empty path ("),a("code",[e._v("/")]),e._v(") to be matched.")])]),e._v(" "),a("h3",{attrs:{id:"v3-0-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v3-0-0"}},[e._v("#")]),e._v(" v3.0.0")]),e._v(" "),a("ul",[a("li",[e._v("Changed conventions:\n"),a("ul",[a("li",[a("code",[e._v("validation.go")]),e._v(" and "),a("code",[e._v("placeholders.go")]),e._v(" moved to a new "),a("code",[e._v("http/validation")]),e._v(" package.")]),e._v(" "),a("li",[e._v("Validation rule sets are now located in a "),a("code",[e._v("request.go")]),e._v(" file in the same package as the controller.")])])])]),e._v(" "),a("p",[a("strong",[e._v("Motivation")]),e._v(": "),a("em",[e._v('Separating the requests in another package added unnecessary complexity to the directory structure and was not convenient to use. Package naming was far from ideal with the "request" suffix. Moving requests to the same package as the controller is more intuitive and requires less imports and makes route definition cleaner and easier.')])]),e._v(" "),a("ul",[a("li",[e._v("Validation system overhaul, allowing rule sets to be parsed only once instead of every time a request is received, giving better overall performance. This new system also allows a more verbose syntax for validation, solving the comma rule parameter value and a much easier use in your handlers.\n"),a("ul",[a("li",[e._v("Rule functions don't check required parameters anymore. This is now done when the rules are parsed at startup time. The amount of required parameters is given when registering a new rule.")]),e._v(" "),a("li",[e._v("Optimized regex-based validation rules by compiling expressions once.")]),e._v(" "),a("li",[e._v("A significant amount of untested cases are now tested.")]),e._v(" "),a("li",[e._v("The following rules now pass if the validated data type is not supported: "),a("code",[e._v("greater_than")]),e._v(", "),a("code",[e._v("greater_than_equal")]),e._v(", "),a("code",[e._v("lower_than")]),e._v(", "),a("code",[e._v("lower_than_equal")]),e._v(", "),a("code",[e._v("size")]),e._v(".")]),e._v(" "),a("li",[e._v("Type-dependent rules now try to determine what is the expected type by looking up in the rule set for a type rule. If no type rule is present, falls back to the inputted type. This change makes it so the validation message is correct even if the client didn't input the expected type.")]),e._v(" "),a("li",[e._v("Fixed a bug triggering a panic if the client inputted a non-array value in an array-validated field.")])])])]),e._v(" "),a("p",[a("strong",[e._v("Motivation")]),e._v(": "),a("em",[e._v("The validation system had a lot of room for improvement when it comes to performance, as "),a("code",[e._v("RuleSet")]),e._v(" were parsed every time a request was received. Moving this process out of the request life-cycle to execute it only once saves a good amount of execution time. Moreover, any handler who would want to read the rules applied to the current request needed to parse them too, which was inconvenient and not effective. With a structure containing everything you need, making middleware interacting with the request's rules is much easier.")])]),e._v(" "),a("ul",[a("li",[e._v("Routing has been improved by changing how validation and route-specific middleware are registered. The signature of the router functions have been simplified by removing the validation and middleware parameters from "),a("code",[e._v("Route()")]),e._v(", "),a("code",[e._v("Get()")]),e._v(", "),a("code",[e._v("Post()")]),e._v(", etc. This is now done through two new chainable methods on the "),a("code",[e._v("Route")]),e._v(": "),a("code",[e._v("route.Validate()")]),e._v(" and  "),a("code",[e._v("route.Middleware()")]),e._v(".")])]),e._v(" "),a("p",[a("strong",[e._v("Motivation")]),e._v(": "),a("em",[e._v("In the original design, the validation parameter was included in the main route definition function because most routes were expected to be validated, which turned out not to be the case. In a typical CRUD, only the create and update actions are validated, which made the route definition dirty and filled with "),a("code",[e._v("nil")]),e._v(" parameters. Separating the rules and middleware definition is more in line with their optional nature and makes routes definition cleaner and more readable, although sometimes slightly longer.")])]),e._v(" "),a("ul",[a("li",[e._v("Log "),a("code",[e._v("Formatter")]),e._v(" now receive the length of the response (in bytes) instead of the full body.")])]),e._v(" "),a("p",[a("strong",[e._v("Motivation:")]),e._v(" "),a("em",[e._v("Keeping in memory the full response has an important impact on memory when sending files or large responses. Using the response content in a log formatter is also a marginal use-case which doesn't justify the performance loss described previously. It is still possible to retrieve the content of the response by writing your own chained writer.")])]),e._v(" "),a("ul",[a("li",[e._v("Configuration system has been revamped.\n"),a("ul",[a("li",[e._v("Added support for tree-like configurations, allowing for better categorization. Nested values can be accessed using dot-separated path.")]),e._v(" "),a("li",[e._v("Improved validation: nested entries can now be validated too and all entries can have authorized values. Optional entries can now be validated too.")]),e._v(" "),a("li",[e._v("Improved support for slices. The validation system is also able to check slices.")]),e._v(" "),a("li",[e._v("Entries that are validated with the "),a("code",[e._v("int")]),e._v(" type are now automatically converted from "),a("code",[e._v("float64")]),e._v(" if they don't have decimal places. It is no longer necessary to manually cast "),a("code",[e._v("float64")]),e._v(" that are supposed to be integers.")]),e._v(" "),a("li",[e._v("More openness: entries can be registered with a default value, their type and authorized values from any package. This allows config entries required by a specific package to be loaded only if the latter is imported.")]),e._v(" "),a("li",[e._v("Core configuration has been sorted in categories. This is a breaking change that will require you to update your configuration files.")]),e._v(" "),a("li",[e._v("Entries having a "),a("code",[e._v("nil")]),e._v(" value are now considered unset.")]),e._v(" "),a("li",[e._v("Added accessors "),a("code",[e._v("GetInt()")]),e._v(" and "),a("code",[e._v("GetFloat()")]),e._v(".")]),e._v(" "),a("li",[e._v("Added slice accessors: "),a("code",[e._v("GetStringSlice()")]),e._v(", "),a("code",[e._v("GetBoolSlice()")]),e._v(", "),a("code",[e._v("GetIntSlice()")]),e._v(", "),a("code",[e._v("GetFloatSlice()")])]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("LoadFrom()")]),e._v(", letting you load a configuration file from a custom path.")]),e._v(" "),a("li",[e._v("Added the ability to use environment variables in configuration files.")]),e._v(" "),a("li",[e._v("Bug fix: "),a("code",[e._v("config.IsLoaded()")]),e._v(" returned "),a("code",[e._v("true")]),e._v(" even if config failed to load.")]),e._v(" "),a("li",[a("code",[e._v("maxUploadSize")]),e._v(" config entry now supports decimal places.")])])])]),e._v(" "),a("p",[a("strong",[e._v("Motivation:")]),e._v(" "),a("em",[e._v("Configuration was without a doubt one of the weakest and inflexible feature of the framework. It was possible to use objects in custom entries, but not for core config, but it was inconvenient because it required a lot of type assertions. Moreover, core config entries were not handled the same as custom ones, which was a lack of openness. Hopefully, this revamped system will cover more potential use-cases, ease plugin development and allow you to produce cleaner code and configuration files.")])]),e._v(" "),a("ul",[a("li",[e._v("Database improvements\n"),a("ul",[a("li",[e._v("Goyave has moved to "),a("a",{attrs:{href:"https://gorm.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GORM v2"),a("OutboundLink")],1),e._v(". Read the "),a("a",{attrs:{href:"https://gorm.io/docs/v2_release_note.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("release note"),a("OutboundLink")],1),e._v(" to learn more about what changed.")]),e._v(" "),a("li",[e._v("Protect the database instance with mutex.")]),e._v(" "),a("li",[a("code",[e._v("database.Close()")]),e._v(" can now return errors.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/database.html#connection-initializers"}},[e._v("database connection initializers")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added the ability to regsiter new SQL dialects to use with GORM.")]),e._v(" "),a("li",[e._v("Use "),a("code",[e._v("utf8mb4")]),e._v(" by default in database options.")]),e._v(" "),a("li",[e._v("Added a short alias for "),a("code",[e._v("database.GetConnection()")]),e._v(": "),a("code",[e._v("database.Conn()")]),e._v(".")]),e._v(" "),a("li",[e._v("Factories now use batch insert.")]),e._v(" "),a("li",[e._v("Factories now return "),a("code",[e._v("interface{}")]),e._v(" instead of "),a("code",[e._v("[]interface{}")]),e._v(". The actual type of the returned value is a slice of the the type of what is returned by your generator, so you can type-assert safely.")])])]),e._v(" "),a("li",[e._v("Status handlers improvements\n"),a("ul",[a("li",[e._v("Export panic and error status handlers so they can be expanded easily.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("goyave.ValidationStatusHandler()")]),e._v(", a status handler for validation errors. Therefore, the format in which validation errors are sent to the client can be customized by using your own status handler for the HTTP status 400 and 422.")])])]),e._v(" "),a("li",[a("code",[e._v("goyave.Response")]),e._v(" improvements\n"),a("ul",[a("li",[a("code",[e._v("response.Render")]),e._v(" and "),a("code",[e._v("response.RenderHTML")]),e._v(" now execute and write the template to a "),a("code",[e._v("bytes.Buffer")]),e._v(" instead of directly to the "),a("code",[e._v("goyave.Response")]),e._v(". This allows to catch and handle errors before the response header has been written, in order to return an error 500 if the template doesn't execute properly for example.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("response.GetStacktrace()")]),e._v(", "),a("code",[e._v("response.IsEmpty()")]),e._v(" and "),a("code",[e._v("response.IsHeaderWritten()")]),e._v(".")]),e._v(" "),a("li",[e._v("Re-organised the "),a("code",[e._v("goyave.Response")]),e._v(" structure fields to save some memory.")]),e._v(" "),a("li",[e._v("Removed deprecated method "),a("code",[e._v("goyave.CreateTestResponse()")]),e._v(". Use "),a("code",[e._v("goyave.TestSuite.CreateTestResponse()")]),e._v(" instead.")])])]),e._v(" "),a("li",[e._v("Recovery middleware now correctly handles panics with a "),a("code",[e._v("nil")]),e._v(" value.")]),e._v(" "),a("li",[e._v("Test can now be run without the "),a("code",[e._v("-p 1")]),e._v(" flag thanks to a lock added to the "),a("code",[e._v("goyave.RunTest")]),e._v(" method. Therefore, "),a("code",[e._v("goyave.TestSuite")]),e._v(" still "),a("strong",[e._v("don't run in parallel")]),e._v(" but are safe to use with the typical test command.")]),e._v(" "),a("li",[e._v("Cache the regex used by "),a("code",[e._v("helper.ParseMultiValuesHeader()")]),e._v(" to improve performance. This also improves the performance of the language middleware.")]),e._v(" "),a("li",[e._v("Bug fix: data under validation wasn't considered from JSON payload if the content type included the charset.")]),e._v(" "),a("li",[e._v("The Gzip middleware will now skip requests that have the "),a("code",[e._v("Upgrade")]),e._v(" HTTP header set to any value.")]),e._v(" "),a("li",[a("code",[e._v("response.String()")]),e._v(" and "),a("code",[e._v("response.JSON()")]),e._v(" don't write header before calling "),a("code",[e._v("Write")]),e._v(" anymore. This behavior prevented middleware and chained writers to alter the response headers.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("goyave.PreWriter")]),e._v(" interface for chained writers needing to alter headers or status before they are written.\n"),a("ul",[a("li",[e._v("Even if this change is not breaking, it is recommended to update all your chained writers to call "),a("code",[e._v("PreWrite()")]),e._v(" on their child writer if they implement the interface.")]),e._v(" "),a("li",[e._v("Thanks to this change, a bug with the gzip middleware has been fixed: header "),a("code",[e._v("Content-Length")]),e._v(" wasn't removed, resulting in false information sent to the clients, which in turn failed to decompress the response.")])])])]),e._v(" "),a("h2",{attrs:{id:"v2-x-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-x-x"}},[e._v("#")]),e._v(" v2.x.x")]),e._v(" "),a("h3",{attrs:{id:"v2-10-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-10-x"}},[e._v("#")]),e._v(" v2.10.x")]),e._v(" "),a("h4",{attrs:{id:"v2-10-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-10-2"}},[e._v("#")]),e._v(" v2.10.2")]),e._v(" "),a("ul",[a("li",[e._v("Fixed a bug in body parsing middleware preventing json body to be parsed if a charset was provided.")])]),e._v(" "),a("h4",{attrs:{id:"v2-10-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-10-1"}},[e._v("#")]),e._v(" v2.10.1")]),e._v(" "),a("ul",[a("li",[e._v("Changed the behavior of "),a("code",[e._v("response.File()")]),e._v(" and "),a("code",[e._v("response.Download()")]),e._v(" to respond with a status 404 if the given file doesn't exist instead of panicking.")]),e._v(" "),a("li",[e._v("Improved error handling:\n"),a("ul",[a("li",[a("code",[e._v("log.Panicf")]),e._v(" is not used anymore to print panics, removing possible duplicate logs.")]),e._v(" "),a("li",[e._v("Added error checks during automatic migrations.")]),e._v(" "),a("li",[a("code",[e._v("goyave.Start()")]),e._v(" now exits the program with the following error codes:\n"),a("ul",[a("li",[a("code",[e._v("2")]),e._v(": Panic (server already running, error when loading language files, etc)")]),e._v(" "),a("li",[a("code",[e._v("3")]),e._v(": Configuration is invalid")]),e._v(" "),a("li",[a("code",[e._v("4")]),e._v(": An error occurred when opening network listener")]),e._v(" "),a("li",[a("code",[e._v("5")]),e._v(": An error occurred in the HTTP server")])])])])])]),e._v(" "),a("p",[e._v("This change will require a slightly longer "),a("code",[e._v("main")]),e._v(" function but offers better flexibility for error handling and multi-services.")]),e._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":=")]),e._v(" goyave"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("nil")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\tos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("Exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v("goyave"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("Error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("ExitCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("ul",[a("li",[e._v("Fixed a bug in "),a("code",[e._v("TestSuite")]),e._v(": HTTP client was re-created everytime "),a("code",[e._v("getHTTPClient()")]),e._v(" was called.")]),e._v(" "),a("li",[e._v("Fixed testing documentation examples that didn't close http response body.")]),e._v(" "),a("li",[e._v("Documentation meta improvements.")]),e._v(" "),a("li",[e._v("Protect JSON requests with "),a("code",[e._v("maxUploadSize")]),e._v(".")]),e._v(" "),a("li",[e._v("The server will now automatically return "),a("code",[e._v("413 Payload Too Large")]),e._v(" if the request's size exceeds the "),a("code",[e._v("maxUploadSize")]),e._v(" defined in configuration.")]),e._v(" "),a("li",[e._v("The request parsing middleware doesn't drain the body anymore, improving native handler compatibility.")]),e._v(" "),a("li",[e._v("Set a default status handler for all 400 errors.")]),e._v(" "),a("li",[e._v("Fixed a bug preventing query parameters to be parsed when the request had the "),a("code",[e._v("Content-Type: application/json")]),e._v(" header.")]),e._v(" "),a("li",[e._v("Added a dark theme for the documentation. It can be toggled by clicking the moon icon next to the search bar.")])]),e._v(" "),a("h4",{attrs:{id:"v2-10-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-10-0"}},[e._v("#")]),e._v(" v2.10.0")]),e._v(" "),a("ul",[a("li",[e._v("Added router "),a("code",[e._v("Get")]),e._v(", "),a("code",[e._v("Post")]),e._v(", "),a("code",[e._v("Put")]),e._v(", "),a("code",[e._v("Patch")]),e._v(", "),a("code",[e._v("Delete")]),e._v(" and "),a("code",[e._v("Options")]),e._v(" methods to register routes directly without having to specify a method string.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/localization.html#placeholders"}},[e._v("placeholder")]),e._v(" support in regular language lines.")],1)]),e._v(" "),a("h3",{attrs:{id:"v2-9-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-9-0"}},[e._v("#")]),e._v(" v2.9.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/database.html#hidden-fields"}},[e._v("hidden fields")]),e._v(".")],1),e._v(" "),a("li",[e._v("Entirely removed Gorilla mux. This change is not breaking: native middleware still work the same.")])]),e._v(" "),a("h3",{attrs:{id:"v2-8-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-8-0"}},[e._v("#")]),e._v(" v2.8.0")]),e._v(" "),a("ul",[a("li",[e._v("Added a built-in logging system.\n"),a("ul",[a("li",[e._v("Added a middleware for access logs using the Common Log Format or Combined Log Format. This allows custom formatters too.")]),e._v(" "),a("li",[e._v("Added three standard loggers: "),a("code",[e._v("goyave.Logger")]),e._v(", "),a("code",[e._v("goyave.AccessLogger")]),e._v(" and "),a("code",[e._v("goyave.ErrLogger")])])])]),e._v(" "),a("li",[e._v("Fixed bug: the gzip middleware now closes underlying writer on close.")])]),e._v(" "),a("h3",{attrs:{id:"v2-7-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-7-x"}},[e._v("#")]),e._v(" v2.7.x")]),e._v(" "),a("h4",{attrs:{id:"v2-7-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-7-1"}},[e._v("#")]),e._v(" v2.7.1")]),e._v(" "),a("ul",[a("li",[e._v("Changed MIME type of "),a("code",[e._v("js")]),e._v(" and "),a("code",[e._v("mjs")]),e._v(" files to "),a("code",[e._v("text/javascript")]),e._v(". This is in accordance with an "),a("a",{attrs:{href:"https://datatracker.ietf.org/doc/draft-ietf-dispatch-javascript-mjs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("IETF draft"),a("OutboundLink")],1),e._v(" that treats application/javascript as obsolete.")]),e._v(" "),a("li",[e._v("Improved error handling: stacktrace wasn't relevant on unexpected panic since it was retrieved from the route's request handler therefore not including the real source of the panic. Stacktrace retrieval has been moved to the recovery middleware to fix this.")])]),e._v(" "),a("h4",{attrs:{id:"v2-7-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-7-0"}},[e._v("#")]),e._v(" v2.7.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("code",[e._v("Request.Request()")]),e._v(" accessor to get the raw "),a("code",[e._v("*http.Request")]),e._v(".")]),e._v(" "),a("li",[e._v('Fixed a bug allowing non-core middleware applied to the root router to be executed when the "Not Found" or "Method Not Allowed" routes were matched.')]),e._v(" "),a("li",[e._v("Fixed a bug making route groups (sub-routers with empty prefix) conflict with their parent router when two routes having the same path but different methods are registered in both routers.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/responses.html#chained-writers"}},[e._v("chained writers")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/middleware.html#gzip"}},[e._v("gzip compression middleware")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added the ability to register route-specific middleware in "),a("code",[e._v("Router.Static()")]),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"v2-6-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-6-0"}},[e._v("#")]),e._v(" v2.6.0")]),e._v(" "),a("ul",[a("li",[e._v("Custom router implementation. Goyave is not using gorilla/mux anymore. The new router is twice as fast and uses about 3 times less memory.")]),e._v(" "),a("li",[e._v("Now redirects to configured protocol if request scheme doesn't match.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/routing.html#named-routes"}},[e._v("named routes")]),e._v(".")],1),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("Route.GetFullURI()")]),e._v(" and "),a("code",[e._v("Route.BuildURL()")]),e._v(" for dynamic URL generation.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("helper.IndexOfStr()")]),e._v(" and "),a("code",[e._v("helper.ContainsStr()")]),e._v(" for better performance when using string slices.")]),e._v(" "),a("li",[e._v("Moved from GoDoc to "),a("a",{attrs:{href:"https://pkg.go.dev/github.com/System-Glitch/goyave/v2",target:"_blank",rel:"noopener noreferrer"}},[e._v("pkg.go.dev"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("Print errors to stderr.")])]),e._v(" "),a("h3",{attrs:{id:"v2-5-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-5-0"}},[e._v("#")]),e._v(" v2.5.0")]),e._v(" "),a("ul",[a("li",[e._v("Added an "),a("RouterLink",{attrs:{to:"/guide/advanced/authentication.html"}},[e._v("authentication system")]),e._v(".")],1),e._v(" "),a("li",[e._v("Various optimizations.")]),e._v(" "),a("li",[e._v("Various documentation improvements.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("dbMaxLifetime")]),e._v(" configuration entry.")]),e._v(" "),a("li",[e._v("Moved from Travis CI to Github Actions.")]),e._v(" "),a("li",[e._v("Fixed a bug making duplicate log entries on error.")]),e._v(" "),a("li",[e._v("Fixed a bug preventing language lines containing a dot to be retrieved.")]),e._v(" "),a("li",[e._v("Fixed "),a("code",[e._v("TestSuite.GetJSONBody()")]),e._v(" not working with structs and slices.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("TestSuite.ClearDatabaseTables()")]),e._v(".")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("Config.Has()")]),e._v(" and "),a("code",[e._v("Config.Register()")]),e._v(" to check for the existence of a config entry and to allow custom config entries valdiation.")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("Request.BearerToken()")]),e._v(".")]),e._v(" "),a("li",[e._v("Added "),a("code",[e._v("Response.HandleDatabaseError()")]),e._v(" for easier database error handling and shorter controller handlers.")])]),e._v(" "),a("h3",{attrs:{id:"v2-4-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-4-x"}},[e._v("#")]),e._v(" v2.4.x")]),e._v(" "),a("h4",{attrs:{id:"v2-4-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-4-3"}},[e._v("#")]),e._v(" v2.4.3")]),e._v(" "),a("ul",[a("li",[e._v("Improved string validation by taking grapheme clusters into consideration when calculating length.")]),e._v(" "),a("li",[a("code",[e._v("lang.LoadDefault")]),e._v(" now correctly creates a fresh language map and clones the default "),a("code",[e._v("en-US")]),e._v(" language. This avoids the default language entries to be overridden permanently.")])]),e._v(" "),a("h4",{attrs:{id:"v2-4-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-4-2"}},[e._v("#")]),e._v(" v2.4.2")]),e._v(" "),a("ul",[a("li",[e._v("Don't override "),a("code",[e._v("Content-Type")]),e._v(" header when sending a file if already set.")]),e._v(" "),a("li",[e._v("Fixed a bug with validation message placeholder "),a("code",[e._v(":values")]),e._v(", which was mistakenly using the "),a("code",[e._v(":value")]),e._v(" placeholder.")])]),e._v(" "),a("h4",{attrs:{id:"v2-4-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-4-1"}},[e._v("#")]),e._v(" v2.4.1")]),e._v(" "),a("ul",[a("li",[e._v("Bundle default config and language in executable to avoid needing to deploy "),a("code",[e._v("$GOROOT/pkg/mod/github.com/!system-!glitch/goyave/")]),e._v(" with the application.")])]),e._v(" "),a("h4",{attrs:{id:"v2-4-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-4-0"}},[e._v("#")]),e._v(" v2.4.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/responses.html#response-render"}},[e._v("template rendring")]),e._v(".")],1),e._v(" "),a("li",[e._v("Fixed PostgreSQL options not working.")]),e._v(" "),a("li",[a("code",[e._v("TestSuite.Middleware()")]),e._v(" now has a more realistic behavior: the finalization step of the request life-cycle is now also executed. This may require your tests to be updated if those check the status code in the response.")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/status-handlers.html"}},[e._v("status handlers")]),e._v(".")],1)]),e._v(" "),a("h3",{attrs:{id:"v2-3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-3-0"}},[e._v("#")]),e._v(" v2.3.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/cors.html"}},[e._v("CORS options")]),e._v(".")],1)]),e._v(" "),a("h3",{attrs:{id:"v2-2-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-2-x"}},[e._v("#")]),e._v(" v2.2.x")]),e._v(" "),a("h4",{attrs:{id:"v2-2-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-2-1"}},[e._v("#")]),e._v(" v2.2.1")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("code",[e._v("domain")]),e._v(" config entry. This entry is used for url generation, especially for the TLS redirect.")]),e._v(" "),a("li",[e._v("Don't show port in TLS redirect response if ports are standard (80 for HTTP, 443 for HTTPS).")])]),e._v(" "),a("h4",{attrs:{id:"v2-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-2-0"}},[e._v("#")]),e._v(" v2.2.0")]),e._v(" "),a("ul",[a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/advanced/testing.html"}},[e._v("testing API")]),e._v(".")],1),e._v(" "),a("li",[e._v("Fixed links in documentation.")]),e._v(" "),a("li",[e._v("Fixed "),a("code",[e._v("models")]),e._v(" package in template project. (Changed to "),a("code",[e._v("model")]),e._v(")")]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/database.html#database-clearregisteredmodels"}},[a("code",[e._v("database.ClearRegisteredModels")])])],1)]),e._v(" "),a("h3",{attrs:{id:"v2-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-1-0"}},[e._v("#")]),e._v(" v2.1.0")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("filesystem.GetMIMEType")]),e._v(" now detects "),a("code",[e._v("css")]),e._v(", "),a("code",[e._v("js")]),e._v(", "),a("code",[e._v("json")]),e._v(" and "),a("code",[e._v("jsonld")]),e._v(" files based on their extension.")]),e._v(" "),a("li",[e._v("Added maintenance mode.\n"),a("ul",[a("li",[e._v("Can be "),a("RouterLink",{attrs:{to:"/guide/advanced/multi-services.html#maintenance-mode"}},[e._v("toggled at runtime")]),e._v(".")],1),e._v(" "),a("li",[e._v("The server can be started in maintenance mode using the "),a("code",[e._v("maintenance")]),e._v(" config option. (Defaults to "),a("code",[e._v("false")]),e._v(")")])])]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/validation.html#validating-arrays"}},[e._v("advanced array validation")]),e._v(", with support for n-dimensional arrays.")],1),e._v(" "),a("li",[e._v("Malformed request messages can now be localized. ("),a("code",[e._v("malformed-request")]),e._v(" and "),a("code",[e._v("malformed-json")]),e._v(" entries in "),a("code",[e._v("locale.json")]),e._v(")")]),e._v(" "),a("li",[e._v("Modified the validator to allow "),a("RouterLink",{attrs:{to:"/guide/basics/validation.html#manual-validation"}},[e._v("manual validation")]),e._v(".")],1)]),e._v(" "),a("h3",{attrs:{id:"v2-0-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v2-0-0"}},[e._v("#")]),e._v(" v2.0.0")]),e._v(" "),a("ul",[a("li",[e._v("Documentation and README improvements.")]),e._v(" "),a("li",[e._v("In the configuration:\n"),a("ul",[a("li",[e._v("The default value of "),a("code",[e._v("dbConnection")]),e._v(" has been changed to "),a("code",[e._v("none")]),e._v(".")]),e._v(" "),a("li",[e._v("The default value of "),a("code",[e._v("dbAutoMigrate")]),e._v(" has been changed to "),a("code",[e._v("false")]),e._v(".")])])]),e._v(" "),a("li",[e._v("Added "),a("RouterLink",{attrs:{to:"/guide/basics/requests.html#accessors"}},[e._v("request data accessors")]),e._v(".")],1),e._v(" "),a("li",[e._v("Some refactoring and package renaming have been done to better respect the Go conventions.\n"),a("ul",[a("li",[e._v("The "),a("code",[e._v("helpers")]),e._v(" package have been renamed to "),a("code",[e._v("helper")])])])]),e._v(" "),a("li",[e._v("The server now shuts down when it encounters an error during startup.")]),e._v(" "),a("li",[e._v("New "),a("RouterLink",{attrs:{to:"/guide/basics/validation.html#validation-getfieldtype"}},[a("code",[e._v("validation.GetFieldType")])]),e._v(" function.")],1),e._v(" "),a("li",[e._v("Config and Lang are now protected with a "),a("code",[e._v("sync.RWMutex")]),e._v(" to avoid data races in multi-threaded environments.")]),e._v(" "),a("li",[e._v("Greatly improve concurrency.")]),e._v(" "),a("li",[e._v("Config can now be reloaded manually.")]),e._v(" "),a("li",[e._v("Added the "),a("RouterLink",{attrs:{to:"/guide/basics/middleware.html#trim"}},[a("code",[e._v("Trim")])]),e._v(" middleware.")],1),e._v(" "),a("li",[a("code",[e._v("goyave.Response")]),e._v(" now implements "),a("code",[e._v("http.ResponseWriter")]),e._v(".\n"),a("ul",[a("li",[e._v("All writing functions can now return an error.")])])]),e._v(" "),a("li",[e._v("Added the "),a("RouterLink",{attrs:{to:"/guide/basics/routing.html#native-handlers"}},[a("code",[e._v("NativeHandler")])]),e._v(" compatibility layer.")],1),e._v(" "),a("li",[e._v("Fixed a bug preventing the static resources handler to find "),a("code",[e._v("index.html")]),e._v(" if a directory with a depth of one was requested without a trailing slash.")]),e._v(" "),a("li",[e._v("Now panics when calling "),a("code",[e._v("Start()")]),e._v(" while the server is already running.")])])])}),[],!1,null,null,null);t.default=i.exports}}]);